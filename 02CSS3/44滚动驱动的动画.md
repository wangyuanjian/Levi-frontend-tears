<!-- TOC -->

- [ä¸¤ç§æ—¶é—´çº¿timeline](#%E4%B8%A4%E7%A7%8D%E6%97%B6%E9%97%B4%E7%BA%BFtimeline)
- [Scroll Progress Timeline](#scroll-progress-timeline)
- [View Progress Timeline](#view-progress-timeline)

<!-- /TOC -->
## ä¸¤ç§æ—¶é—´çº¿(timeline)
æˆ‘ä¸çŸ¥é“ä¸­æ–‡è¯¥æ€ä¹ˆç¿»è¯‘æˆ‘å°±ä¸ç¿»è¯‘äº†...ğŸ˜… ä½†æ˜¯æœ‰å¿…è¦è§£é‡Šä¸€ä¸‹è¿™ä¸ªæ–°çš„åè¯æ˜¯ä»€ä¹ˆæ„æ€, æ—¶é—´çº¿å°±æ˜¯ç”¨æ¥æ¨åŠ¨åŠ¨ç”»è¿›åº¦çš„.
- `scroll progress timeline`: é€šè¿‡ä»ä¸Šåˆ°ä¸‹(æˆ–ä»å·¦åˆ°å³)æ»šåŠ¨ä¸€ä¸ªå¯æ»šåŠ¨å…ƒç´ (ä¹Ÿè¢«ç§°ä¸º `scrollport` æˆ– `scroller`)æ¥æ¨è¿›è¿™ä¸ªæ—¶é—´çº¿. æ»šåŠ¨è¿‡ç¨‹ä¸­çš„ä½ç½®è¢«è½¬åŒ–ä¸ºæ»šåŠ¨è¿›åº¦çš„ç™¾åˆ†æ¯”â€”â€”æ»šåŠ¨åˆšå¼€å§‹æ˜¯ `0%`, æ»šåŠ¨ç»“æŸæ˜¯ `100%`. ğŸ“–è¿™ä¸ªè¿‡ç¨‹æ˜¯å¯ä»¥åå¤çš„, å³ä¸Šä¸‹(æˆ–å·¦å³)æ¥å›æ»šåŠ¨.
  - ![](../image/scroll-progress-time-example.gif)
  - ğŸ“– è¿™ä¸ªå®šä¹‰å¹¶ä¸ä¸¥è°¨, å› ä¸º `scrollport` å®é™…ä¸Šåº”è¯¥æ˜¯ `scroller` é™¤å»å…¶ `padding box` çš„åŒºåŸŸ.
- `view progress timeline`: è¿™ä¸ªæ—¶é—´çº¿æ˜¯åŸºäºå…ƒç´ (`subject`)åœ¨æ»šåŠ¨å®¹å™¨(`scroller`)ä¸­çš„`å¯è§æ€§`å˜åŒ–. ä¹Ÿå°±æ˜¯è¯´, å…ƒç´ åœ¨å®¹å™¨çš„å¯è§æ€§è¢«è½¬åŒ–ä¸ºç™¾åˆ†æ¯”â€”â€”é»˜è®¤æƒ…å†µä¸‹, å½“å…ƒç´ åˆšåˆšå‡ºç°åœ¨å®¹å™¨è¾¹ç¼˜æ—¶, ä¸º `0%`, å½“å…ƒç´ å®Œå…¨ç¦»å¼€, ä¸º `100%`.
  - å¯ä»¥ç±»æ¯” `IntersectionObserver` æ˜¯å¦‚ä½•å·¥ä½œçš„.
  - ![](../image/view-progress-time-example.gif)
  - å®é™…ä¸Š, å¼€å‘äººå‘˜å¯ä»¥å†³å®šå…ƒç´  `0%` ä»å“ªé‡Œå¼€å§‹, `100%` åˆ°å“ªé‡Œç»“æŸ, è¿™æ˜¯åè¯, æ¶‰åŠ `animation-range` å±æ€§.

å¯¹æ¯”ä¸¤ä¸ªæ—¶é—´çº¿, å¯ä»¥å‘ç°ä»–ä»¬éƒ½ä¼šè¿½è¸ª `scroller` çš„æ»šåŠ¨åç§», ä½†æ˜¯ `view progress timeline` æ˜¯æ ¹æ®å…ƒç´ åœ¨ `scroller` ä¸­çš„ä½ç½®å†³å®šæ•´ä¸ªæ»šåŠ¨è¿›åº¦.

é™¤äº†ä¸Šé¢æåˆ°çš„ä¸¤ç§æ—¶é—´çº¿, è¿˜æœ‰ä¸€ç§é»˜è®¤çš„[æ–‡æ¡£æ—¶é—´çº¿(document timeline)](https://developer.mozilla.org/en-US/docs/Web/CSS/animation-timeline), ä»é¡µé¢åŠ è½½å®Œæˆå¼€å§‹. æ–‡æ¡£æ—¶é—´çº¿ä¼ ç»Ÿä¸Šä¸ `CSS` çš„ `animation` ç›¸å…³, å¦‚æœä¸è®¾å®š `animation-timeline` å±æ€§æˆ–è€…è®¾ç½®ä¸º `auto`, å°±æ˜¯æ–‡æ¡£æ—¶é—´çº¿.

## Scroll Progress Timeline
é€šè¿‡ `animation-timeline` å±æ€§, æŒ‡å®šç”¨äºæ§åˆ¶ `CSS` åŠ¨ç”»è¿›åº¦çš„æ—¶é—´çº¿, å¦‚æœæ˜¯ `scroll progress timeline` éœ€è¦ `animation-timeline` çš„å€¼ä¸º [scroll()](https://developer.mozilla.org/en-US/docs/Web/CSS/animation-timeline/scroll). ä¸Šé¢åŠ¨å›¾çš„ä¾‹å­
```css
@keyframes bg-scroll { ... }
.bg {
  animation: bg-scroll linear forwards;
  animation-timeline: scroll();
}
```
é¦–å…ˆ, `animation` ç®€å†™å±æ€§å¹¶ä¸åŒ…å« `animation-timeline`, å› æ­¤å¿…é¡»å•ç‹¬å£°æ˜. å¦å¤– `animation-timeline` å¿…é¡»å£°æ˜åœ¨ `animation` åé¢å› ä¸º `animation-timeline` ä¼šé‡ç½®æ‰€æœ‰ `animation` ä¸­æ²¡æœ‰å‡ºç°çš„å±æ€§ä¸ºåˆå§‹å€¼.
## View Progress Timeline
å°† `animation-timeline` çš„å€¼è®¾ç½®ä¸º [view()](https://developer.mozilla.org/en-US/docs/Web/CSS/animation-timeline/view), å³å¯åˆ›å»ºç”¨äºæ§åˆ¶ `CSS` åŠ¨ç”»è¿›åº¦çš„ `view progress timeline`.
```css
@keyframes bg-scroll { ... }
.bg {
  animation: bg-scroll linear forwards;
  animation-timeline: view();
}
```
æ¯”èµ· `scroll()`, æˆ‘ä»¬å¯ä»¥é€šè¿‡ `view-timeline-inset` æ§åˆ¶åŠ¨ç”»çš„æ›´å¤šéƒ¨åˆ†.


è°¢è°¢ä½ çœ‹åˆ°è¿™é‡ŒğŸ˜Š