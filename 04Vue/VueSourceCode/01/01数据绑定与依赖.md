# Vue2 æ•°æ®ç»‘å®šä¸ä¾èµ–
> è¿™é‡Œå®ç°éå¸¸éå¸¸ç®€å•ä¸åŸºç¡€çš„æ•°æ®ç»‘å®šä¸ä¾èµ–

## åˆå§‹éƒ¨åˆ†
é¦–å…ˆ, æ¥çœ‹æ¨¡æ¿çš„å†…å®¹, åªæœ‰ç»‘å®šä¸æ›´æ–°. æ³¨æ„è¿™é‡Œæ¨¡æ¿è¶…çº§ç®€å•, æ²¡æœ‰æ ‡ç­¾åµŒå¥—ã€æ²¡æœ‰çº§è”çš„å±æ€§ç­‰ç­‰.
```html
<div id="app">
  <div>{{ name }}</div>
  <div>{{ age }}</div>
  <div>{{ name }}</div>
  <div>{{ age }}</div>
  <button @click="updateAge">updateAge</button>
</div>
```
æ„é€ è‡ªå·±çš„ `Vue` å®ä¾‹å¯¹è±¡, ç…§è‘«èŠ¦ç”»ç“¢ä¹Ÿä¼ å…¥ä¸¤ä¸ªå‚æ•°
- `Vue` å®ä¾‹æŒ‚è½½çš„æ ¹å®¹å™¨ç»„ä»¶
- é…ç½®å¯¹è±¡
```js
const app = new Vue('#app', {
  data: {
    name: 'Levi',
    age: 25
  },
  methods: {
    updateAge() {
      this.age = 18
    }
  }
})
```
## ä»£ç è®²è§£
è¿™é‡Œç›´æ¥ä½¿ç”¨ `ES6` ä¸­çš„ `Class` ä½œä¸ºå®ç°åŸºç¡€. `PS`: æˆ‘ä»¬ä¸å¯¹å‚æ•°åšä»»ä½•æ ¡éªŒ, é»˜è®¤æ‰€ä»¥å‚æ•°éƒ½æœ‰ä¸”ç±»å‹æ•°æ®éƒ½æ­£ç¡®.

### æ•°æ®ç»‘å®š
åœ¨ `constructor` å‡½æ•°ä¸­
- é¦–å…ˆè·å¾—æ ¹å…ƒç´ 
- ç„¶åä» `configObject` ä¸Šè§£æ„å‡º `data` å’Œ `methods` ä¸¤ä¸ªå¯¹è±¡
- åˆ›å»º `_data` å±æ€§ç”¨æ¥ä¿å­˜æœ€åŸå§‹ä¼ å…¥çš„æ•°æ®
- æœ€åè°ƒç”¨ `init()` æ–¹æ³•.
```js
constructor(el, configObject) {
  this.el = document.querySelector(el)
  const { data, methods } = configObject
  this._data = data

  this.init()
}
```
`init()` æ–¹æ³•ä¸­åªåšä¸€ä»¶äº‹å°±æ˜¯è°ƒç”¨ `initDataBind()` æ–¹æ³•.
```js
class Vue {
  init() {
    this.initDataBind()
  }

  initDataBind() {
    this.data = {}
    const _this = this

    for(let key in this._data) {
      let obj = {
        get() {
          return _this._data[key]
        },
        set(newValue) {
          _this._data[key] = newValue
        }
      }
      Object.defineProperty(this.data, key, obj)
      Object.defineProperty(this, key, obj)
    }
  }
}
```
æˆ‘ä»¬åˆ›å»ºäº†æ–°çš„å±æ€§ `data` ç”¨æ¥åšå“åº”å¼, é¦–å…ˆæ¥è¯´æ˜ä¸€ä¸‹ `getter` å’Œ `setter` ä¸­çš„ `this` æŒ‡å‘é—®é¢˜, `this` å°±æ˜¯æ·»åŠ æ–°å±æ€§çš„å¯¹è±¡. æ¥çœ‹ä¸‹é¢çš„ä»£ç å’Œæ§åˆ¶å°çš„æ‰“å°.
```js
let obj = {}
Object.defineProperty(obj, 'name', {
  get() { return 'Levi' },
  set() { console.log(this) }
});
obj.name = 'hh'
```
![](../../../image/Snipaste_2023-01-11_22-29-09.png)

é™¤äº†åœ¨ `data` ä¸Šå®šä¹‰å“åº”å¼ä¹‹å¤–, è¿˜åœ¨ `Vue` å®ä¾‹æœ¬èº«å®šä¹‰äº†, ç¨ååœ¨ methods éƒ¨åˆ†åšä»‹ç».


```js
```
![](../../../image/)
è°¢è°¢ä½ çœ‹åˆ°è¿™é‡ŒğŸ˜Š
