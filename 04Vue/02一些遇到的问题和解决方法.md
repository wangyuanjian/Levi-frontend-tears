# ä¸€äº›é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ³•
## è·å¾—$emitå¯¹åº”å‡½æ•°çš„è¿”å›å€¼
1. å¤§æ¦‚çš„é—®é¢˜å°±æ˜¯, å­ç»„ä»¶ `Avatar` è§¦å‘äº†çˆ¶ç»„ä»¶ `Info` çš„å›è°ƒ, å¸Œæœ›æ‹¿åˆ°å›è°ƒå‡½æ•°çš„è¿”å›å€¼è¿›è€Œæ‹¿åˆ°çˆ¶ç»„ä»¶çš„æŸäº›ä¿¡æ¯, æ¯”å¦‚
    - ä¸‹é¢æ˜¯å­ç»„ä»¶
    - ```html
      <template>
        <div style="background-color: skyblue;">
          <div>æˆ‘æ˜¯Avatar-å­ç»„ä»¶</div>
          <button @click="getParentInfo">ç‚¹æˆ‘è·å–ä¿¡æ¯</button>
        </div>
      </template>

      <script>
      export default {
        data() {
          return {
          }
        },
        methods: {
          getParentInfo() {
            const returnValue = this.$emit('getInfo');
            console.log('è¿”å›å€¼æ˜¯', returnValue);
          }
        }
      }
      </script>
    - ä¸‹é¢æ˜¯çˆ¶ç»„ä»¶
    - ```html
      <template>
        <div style="background-color: pink; padding-bottom: 1rem;">
          <div>æˆ‘æ˜¯Info-çˆ¶ç»„ä»¶</div>
          <Avatar @getInfo="getInfoCallback"></Avatar>
        </div>
      </template>

      <script>
      import Avatar from './Avatar.vue';

      export default {
        components: { Avatar, },
        data() {
          return {
            name: 'hello, world'
          }
        },
        methods: {
          getInfoCallback() {
            return this.name;
          }
        }
      }
      </script>
    - ![](../../image/Snipaste_2022-04-18_22-02-56.png)
    - å¯ä»¥çœ‹åˆ°, `$emit` è¿”å›çš„å¹¶ä¸æ˜¯çˆ¶ç»„ä»¶çš„ `name` å±æ€§, è€Œæ˜¯å­ç»„ä»¶å®ä¾‹
2. å¦‚æœè¦è§£å†³è¿™ä¸ªé—®é¢˜, æˆ‘ä»¬å¯ä»¥å°†ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ä¼ è¿›å», æ¯”å¦‚
    - å­ç»„ä»¶
    - ```js
      methods: {
        getParentInfo() {
          this.$emit('getInfo', (name) => {
            console.log('è¿™æ¬¡æ‹¿åˆ°äº† ', name);
          });
        }
      }
    - çˆ¶ç»„ä»¶: åœ¨æ¥æ”¶å‚æ•°çš„åŒæ—¶è°ƒç”¨
    - ```js
      methods: {
        getInfoCallback(callback) {
          callback(this.name);
        }
      }
    - ![](../../image/Snipaste_2022-04-18_22-13-00.png)
## åœ¨ `CSS` ä¸­ä½¿ç”¨ `data` ä¸­å®šä¹‰çš„æ•°æ®
1. è€ƒè™‘ä¸€ä¸ªé—®é¢˜, åç«¯ä¼ æ¥ä¸€ä¸ªæ•°æ®, æ¯”å¦‚æ˜¯æŸä¸ªç™¾åˆ†æ¯”, éœ€è¦åœ¨é¡µé¢åšè¿›åº¦å±•ç¤º. ä¸€èˆ¬çš„æƒ…å†µéƒ½ä¼šåœ¨ `CSS` ä¸­è®¾ç½®æ•°æ®å±•ç¤º, ä½†æ˜¯ `CSS` ä¸­å¦‚ä½•è·å–åˆ°åç«¯ä¼ æ¥çš„æ•°æ®å‘¢?
2. ä½¿ç”¨è‡ªå®šä¹‰å±æ€§: `data-`
    - é€šè¿‡ `v-bind` å°†åç«¯çš„æ•°æ®ç»‘å®šåœ¨è‡ªå®šä¹‰ `HTML` å±æ€§ä¸Š, ç„¶åé€šè¿‡ `CSS` çš„ `attr()` å‡½æ•°è·å–è¯¥å±æ€§
    - ```html
      <template>
        <div>
          <div class="box" 
          :data-content="obj.desc" 
          :data-percent="obj.percent"></div>
        </div>
      </template>

      <script>
        export default {
          name: 'Student',
          data() {
            return {
              obj: {
                percent: '30%',
                desc: 'å“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ'
              }
            }
          },
          methods: {
          },
        }
      </script>

      <style>
      .box {
        width: 400px;
        height: 200px;
        border: 1px solid salmon;
        position: relative;
      }
      .box::before, .box::after {
        position: absolute;
        top: 0; bottom: 0;
      }
      .box::before {
        content: attr(data-content);
        left: 0;
        right: calc(100% - attr(data-percent));
        background-color: deepskyblue;
      }
      .box::after {
        content: attr(data-content);
        right: 0;
        left: attr(data-percent);
        background-color: deeppink;
      }
      </style>
    - æœ€åé¡µé¢å±•ç¤º
      - ![](../../image/Snipaste_2022-05-07_12-42-20.png)
    - ğŸ˜±è®¡ç®— `right` éƒ¨åˆ†å¤±æ•ˆäº†, åŸå› æ˜¯ `attr()` å‡½æ•°ä¸èƒ½åœ¨ `calc()` ä¸­ä½¿ç”¨! æ€ä¹ˆåŠå‘¢?
3. è‡ªå®šä¹‰ `CSS` å˜é‡
    - é€šè¿‡åœ¨ `HTML` çš„ `style` å±æ€§ä»¥ `v-bind` çš„å½¢å¼ç»‘å®šå®šä¹‰çš„ `CSS` å˜é‡, ç»§è€Œåœ¨ `CSS` ä¸­ä½¿ç”¨è¯¥å˜é‡è¾¾åˆ°æ•ˆæœ
    - ```html
      <template>
        <div>
          <div class="box" 
          :style="{'--percent': obj.percent}"
          :data-content="obj.desc" 
          :data-percent="obj.percent"></div>
        </div>
      </template>
      <style>
        .box {
          width: 400px;
          height: 200px;
          border: 1px solid salmon;
          position: relative;
        }
        .box::before, .box::after {
          position: absolute;
          top: 0; bottom: 0;
        }
        .box::before {
          content: attr(data-content);
          left: 0;
          /* right: calc(100% - attr(data-percent)); */
          right: calc(100% - var(--percent));
          background-color: deepskyblue;
        }
        .box::after {
          content: attr(data-content);
          right: 0;
          /* left: attr(data-percent); */
          left: var(--percent);
          background-color: deeppink;
        }
        </style>
    - ä¸Šé¢çš„ä»£ç çœç•¥äº† `<script>` æ ‡ç­¾éƒ¨åˆ†, å› ä¸ºè¿™éƒ¨åˆ†æ²¡æœ‰æ”¹åŠ¨
    - ![](../../image/Snipaste_2022-05-07_12-45-38.png)
    - ğŸ˜€å½“å½“å½“å½“! æˆåŠŸ!ğŸ‡